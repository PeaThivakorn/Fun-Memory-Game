<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏Å‡∏°‡∏™‡πå‡πÅ‡∏°‡πà‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏π‡∏ì</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; font-family: 'Kanit', sans-serif; }
    body { margin: 0; padding: 0; background: linear-gradient(to bottom, #fceabb, #f8b500); overflow-x: hidden; }
    .container { max-width: 800px; margin: 40px auto; background: #fff; border-radius: 20px; padding: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }
    h1 { text-align: center; color: #ff6f00; }
    .question { display: flex; flex-wrap: wrap; justify-content: space-between; margin-bottom: 10px; }
    .question input { width: 60px; padding: 5px; font-size: 18px; text-align: center; border-radius: 10px; border: 1px solid #ccc; }
    .question span { font-size: 20px; margin-right: 10px; }
    .buttons { text-align: center; margin-top: 20px; }
    button {
      background: #ff6f00; color: white; padding: 10px 20px; border: none;
      border-radius: 10px; font-size: 18px; cursor: pointer; margin: 5px;
      transition: background 0.3s;
    }
    button:hover { background: #e65c00; }
    .result { font-weight: bold; margin-left: 10px; }
    .correct { color: green; }
    .wrong { color: red; }

    .popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .popup-content {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      max-width: 600px;
      width: 90%;
      position: relative;
      z-index: 1001;
    }
    .popup h2 { color: #ff6f00; }
    .feedback-message {
      font-size: 20px;
      margin-top: 15px;
      color: #2e7d32;
    }
    .feedback-message.bad {
      color: #d32f2f;
    }

    canvas#fireworks {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 999;
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>
  <div class="container">
    <h1>‡πÄ‡∏Å‡∏°‡∏™‡πå‡πÅ‡∏°‡πà‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏π‡∏ì</h1>
    <h2 id="tableTitle">‡πÅ‡∏°‡πà 2</h2>
    <div id="quiz"></div>
    <div class="buttons">
      <button onclick="checkAnswers()">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
    </div>
  </div>

  <div class="popup" id="popup">
    <div class="popup-content">
      <h2>‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏°‡πà <span id="popupTable"></span></h2>
      <div id="popupAnswers"></div>
      <div id="feedback" class="feedback-message"></div>
      <div class="buttons">
        <button onclick="reloadTable()">‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button onclick="nextTable()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      </div>
    </div>
  </div>

  <script>
    let currentTable = 2;

    function loadTable(table) {
      document.getElementById("tableTitle").innerText = `‡πÅ‡∏°‡πà ${table}`;
      const quiz = document.getElementById("quiz");
      quiz.innerHTML = "";
      for (let i = 1; i <= 12; i++) {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `
          <span>${table} x ${i} = </span>
          <input type="number" id="ans-${i}" />
          <span id="result-${i}" class="result"></span>
        `;
        quiz.appendChild(div);
      }
    }

    function checkAnswers() {
      let answerHTML = "";
      let correctCount = 0;

      for (let i = 1; i <= 12; i++) {
        const userAns = parseInt(document.getElementById(`ans-${i}`).value);
        const correct = currentTable * i;
        let isCorrect = userAns === correct;
        if (isCorrect) correctCount++;
        answerHTML += `<div>${currentTable} x ${i} = ${correct} ‚Üí ` +
                       (isCorrect ? `<span class='correct'>‚úì ‡∏ñ‡∏π‡∏Å</span>` : `<span class='wrong'>‚úó ‡∏ú‡∏¥‡∏î (‡∏ï‡∏≠‡∏ö ${userAns || ""})</span>`) +
                      `</div>`;
      }

      const feedback = document.getElementById("feedback");
      if (correctCount === 12) {
        feedback.innerText = "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢ üéâüëè";
        feedback.className = "feedback-message good";
        startFireworks();
      } else if (correctCount === 0) {
        feedback.innerText = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏¢ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞! üí™";
        feedback.className = "feedback-message bad";
      } else {
        feedback.innerText = `‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å ${correctCount} ‡∏Ç‡πâ‡∏≠ ‡∏•‡∏≠‡∏á‡∏ù‡∏∂‡∏Å‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡∏ô‡∏∞! üòä`;
        feedback.className = "feedback-message";
      }

      document.getElementById("popupTable").innerText = currentTable;
      document.getElementById("popupAnswers").innerHTML = answerHTML;
      document.getElementById("popup").style.display = "flex";
    }

    function reloadTable() {
      stopFireworks();
      loadTable(currentTable);
      document.getElementById("popup").style.display = "none";
    }

    function nextTable() {
      stopFireworks();
      if (currentTable < 12) {
        currentTable++;
        loadTable(currentTable);
      } else {
        alert("‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏™‡πå‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å üéâ\n‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà 2");
        currentTable = 2;
        loadTable(currentTable);
      }
      document.getElementById("popup").style.display = "none";
    }

    loadTable(currentTable);

    // Fireworks animation
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    let particles = [], interval;
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function random(min, max) {
      return Math.random() * (max - min) + min;
    }

    function createFirework() {
      const x = random(0, canvas.width);
      const y = random(0, canvas.height / 2);
      const color = `hsl(${random(0, 360)}, 100%, 60%)`;
      for (let i = 0; i < 60; i++) {
        particles.push({
          x: x,
          y: y,
          radius: 2,
          color: color,
          angle: random(0, Math.PI * 2),
          speed: random(1, 5),
          alpha: 1
        });
      }
    }

    function updateFireworks() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, i) => {
        p.x += Math.cos(p.angle) * p.speed;
        p.y += Math.sin(p.angle) * p.speed;
        p.alpha -= 0.01;
        if (p.alpha <= 0) particles.splice(i, 1);
        ctx.globalAlpha = p.alpha;
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    function startFireworks() {
      interval = setInterval(() => {
        createFirework();
      }, 300);
      animateFireworks();
    }

    function animateFireworks() {
      updateFireworks();
      if (interval) requestAnimationFrame(animateFireworks);
    }

    function stopFireworks() {
      clearInterval(interval);
      interval = null;
      particles = [];
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
  </script>
</body>
</html>
